!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var f;"undefined"!=typeof window?f=window:"undefined"!=typeof global?f=global:"undefined"!=typeof self&&(f=self),f.superviews=e()}}(function(){var define,module,exports;return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s}({1:[function(_dereq_,module,exports){var defaultOptions={prefix:"ui",dupeAttrName:"dupe",withAttrName:"with",forAttrName:"for",textAttrName:"text",htmlAttrName:"html",valueAttrName:"value",bindings:{text:function(el,value){el.innerText=value},html:function(el,value){el.innerHTML=value},value:function(el,value){el.value=value}}};function nodeListToArray(nodeList){var nodeArray=[];for(var i=0;i<nodeList.length;i++){nodeArray.push(nodeList[i])}return nodeArray}function Scope(el,ctx){this.el=el;this.ctx=ctx}function evaluate(ctx,statement){return new Function("ctx","with (ctx) {\n return "+statement+"\n}")(ctx)}function mixin(target,source){for(var key in source){target[key]=source[key]}return target}function getAttrName(prefix,name){return prefix?prefix+"-"+name:name}function findScope(el,scopes){var scopeElements=scopes.map(function(item){return item.el});var idx,check=el;while(check){if(check.__ctx){return{el:check,ctx:check.__ctx}}idx=scopeElements.lastIndexOf(check);if(idx!==-1){return scopes[idx]}check=check.parentNode}throw new Error("Unable to resolve scope")}function insertAfter(newNode,referenceNode){referenceNode.parentNode.insertBefore(newNode,referenceNode.nextSibling)}function superviews(rootEl,rootCtx,options){rootEl=rootEl||document.body;rootCtx=rootCtx||window;var opts=Object.create(defaultOptions);if(options){mixin(opts,options)}var prefix=opts.prefix;var dupeAttrName=getAttrName(prefix,opts.dupeAttrName);var withAttrName=getAttrName(prefix,opts.withAttrName);var forAttrName=getAttrName(prefix,opts.forAttrName);var textAttrName=getAttrName(prefix,opts.textAttrName);var htmlAttrName=getAttrName(prefix,opts.valueAttrName);var valueAttrName=getAttrName(prefix,opts.valueAttrName);var selectors=[withAttrName,forAttrName,textAttrName,htmlAttrName,valueAttrName];Array.prototype.forEach.call(rootEl.querySelectorAll("["+dupeAttrName+"]"),function(node){node.parentNode.removeChild(node)});var selector="["+selectors.join("],[")+"]";var scopes=[new Scope(rootEl,rootCtx)];function processNode(el){var ctx,attrs,withAttr,forAttr,textAttr,htmlAttr,valueAttr,forItems;attrs=el.attributes;ctx=el.__ctx||findScope(el,scopes).ctx;if(ctx==="__IGNORE__"){return}withAttr=attrs[withAttrName];if(withAttr){ctx=evaluate(ctx,withAttr.value);scopes.push(new Scope(el,ctx))}forAttr=attrs[forAttrName];if(forAttr){forItems=evaluate(ctx,forAttr.value);if(forItems.length){var firstItem=forItems[0];scopes.push(new Scope(el,firstItem));ctx=firstItem;if(forItems.length>1){var ctnr=document.createElement("div");var clone;for(var j=1;j<forItems.length;j++){clone=el.cloneNode(true);clone.removeAttribute(forAttrName);clone.setAttribute(dupeAttrName,"");clone.__ctx=forItems[j];ctnr.appendChild(clone)}process(ctnr);var after,child;for(var k=0;k<ctnr.children.length;k++){child=ctnr.children[k];insertAfter(child,after||el);after=child}}el.style.display=""}else{el.style.display="none";scopes.push(new Scope(el,"__IGNORE__"));return}}if(!el.__ctx){el.__ctx=ctx}textAttr=attrs[textAttrName];if(textAttr){el.innerText=evaluate(ctx,textAttr.value)}htmlAttr=attrs[htmlAttrName];if(htmlAttr){el.innerHTML=evaluate(ctx,htmlAttr.value)}valueAttr=attrs[valueAttrName];if(valueAttr){el.value=evaluate(ctx,valueAttr.value)}}function process(el){var initialSelection=el.querySelectorAll(selector);var selection=nodeListToArray(initialSelection);if(el.parentNode){selection.unshift(el)}var node;for(var i=0;i<selection.length;i++){node=selection[i];processNode(node)}}process(rootEl)}module.exports=superviews},{}]},{},[1])(1)});